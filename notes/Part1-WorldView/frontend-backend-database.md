# 前端 vs 後端 vs 資料庫

> **學習日期**：2025-01-14
> **所屬章節**：Part 1 - 程式世界觀

## 重點摘要

1. **前端**：負責顯示畫面和使用者互動，跑在使用者的裝置（瀏覽器）上
2. **後端**：負責處理邏輯，跑在伺服器上，只回傳資料
3. **資料庫**：負責永久儲存資料
4. **三者關係**：前端請求 → 後端處理 → 回傳資料 → 前端顯示
5. **關鍵概念**：後端不「開啟」前端，只「回傳資料」給前端

## 詳細內容

### 三層架構比喻：餐廳

| 層級 | 餐廳比喻 | 負責什麼 |
|------|----------|----------|
| 前端 | 外場（座位區） | 顯示畫面、接收使用者操作 |
| 後端 | 廚房 | 處理邏輯、業務規則 |
| 資料庫 | 倉庫 | 永久儲存資料 |

### 常見誤解

- **錯誤**：後端 = 儲存資料的地方
- **正確**：後端 = 處理邏輯的地方，資料庫才是儲存資料的地方

### 資料流向

```
使用者操作
    ↓
前端發送請求
    ↓
後端處理邏輯
    ↓
(可能) 存取資料庫
    ↓
後端回傳資料
    ↓
前端顯示結果
```

### Next.js 的特殊之處

Next.js 是「全端框架」，前端和後端寫在同一個專案：

- **前端**：`app/page.tsx`, `app/blog/page.tsx` 等頁面檔案
- **後端**：`app/api/*/route.ts` API 路由檔案

## 實例：我的專案

### 後端範例：個人訊息流強化 (Flask)

```python
@app.route("/webhook", methods=["POST"])
def webhook():
    update = request.get_json()        # 收到請求
    result = process_message(message)  # 處理邏輯
    send_reply(chat_id, format_reply(result))  # 回傳資料
```

這段程式碼不產生任何畫面，只負責「收資料 → 處理 → 回傳」。

### 前端範例：wilsonchao.com (Next.js)

```tsx
return (
  <main className="page-shell">
    <h1>{siteCopy.heroTitle}</h1>
    <p>{siteCopy.heroSubtitle}</p>
  </main>
);
```

這段程式碼描述畫面長什麼樣子，跑在使用者的瀏覽器裡。

### 資料庫範例：Vercel KV

```typescript
kv.incr(totalKey)  // 把瀏覽次數 +1，存到資料庫
```

## 相關主題

- [[API 是什麼]] - 前後端如何溝通
- [[Flask 路由]] - 後端如何定義「入口」
- [[Next.js 組件]] - 前端如何組織畫面
